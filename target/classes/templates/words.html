<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Extracted Words</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body { background-color: #f9f9f9; color: #333; }
  .alphabet-nav .nav-link { font-weight: bold; color: #0d6efd; }
  .alphabet-nav .nav-link.active { background-color: #0d6efd; color: #fff !important; }
  td:first-child { width: 5%; font-size: 1.1em; color: #6c757d; }
  td:nth-child(2) { font-weight: bold; }
  td:last-child { text-align: right; }
  .dict-btn { font-size: 0.9em; padding: 0.4em 0.8em; }
  @media (max-width: 768px) {
    h2 { font-size: 1.4em; }
    #searchBox { width: 100% !important; margin-top: 0.5em; }
    td:first-child { font-size: 1em; }
    .dict-btn { font-size: 0.85em; padding: 0.3em 0.6em; }
    .table-responsive { overflow-x: auto; }
  }
</style>
</head>
<body>
<div class="container py-4">
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-3">
    <h2 class="text-primary fw-bold">üìë Extracted Words</h2>
    <input id="searchBox" type="text" class="form-control w-25 w-md-25 mt-2 mt-md-0" placeholder="Search word...">
  </div>

  <!-- „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ (A‚ÄìZ + ALL) -->
  <ul class="nav nav-pills alphabet-nav justify-content-center flex-wrap mb-4" role="tablist">
    <li class="nav-item" th:each="entry : ${groupedWords.entrySet()}">
      <a class="nav-link" th:attr="href='#' + ${entry.key}" th:text="${entry.key}" data-bs-toggle="tab" role="tab"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" href="#ALL" data-bs-toggle="tab" role="tab">ALL</a>
    </li>
  </ul>

  <div class="tab-content card shadow-sm border-0">
    <!-- ALL „Çø„Éñ -->
    <div class="tab-pane fade show active p-3 table-responsive" id="ALL" role="tabpanel">
      <h4 class="mb-3">ALL (<span th:text="${words.size()}"></span> words)</h4>
      <table class="table table-hover align-middle mb-0">
        <tbody>
          <tr th:each="w, stat : ${words}" th:attr="data-word=${w}">
            <td>#<span th:text="${stat.index + 1}"></span></td>
            <td th:text="${w}"></td>
            <td>
              <a class="btn btn-sm btn-outline-primary dict-btn" th:href="@{'/define/' + ${w}}" target="_blank">üîç View in Dictionary</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- A‚ÄìZ „Çø„Éñ -->
	<div th:each="entry : ${groupedWords.entrySet()}" 
	     th:attr="id=${entry.key}" class="tab-pane fade p-3 table-responsive">
	    <h4 th:text="${entry.key}"></h4>
	    <table class="table table-hover align-middle mb-0">
	        <tbody>
	            <tr th:each="w, stat : ${entry.value}">
	                <td class="text-muted">#<span th:text="${stat.index + 1}"></span></td>
	                <td th:text="${w}"></td>
	                <td>
						<a class="btn btn-sm btn-outline-primary dict-btn" th:href="@{'/define/' + ${w}}" target="_blank">üîç View in Dictionary</a>
	                </td>
	            </tr>
	        </tbody>
	    </table>
	</div>

  <div class="text-center mt-4">
    <a href="/" class="btn btn-secondary">‚Üê Êàª„Çã</a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Ê§úÁ¥¢Ê©üËÉΩ
const searchBox = document.getElementById("searchBox");
searchBox.addEventListener("input", function () {
  const query = this.value.toLowerCase();
  document.querySelectorAll("tbody tr").forEach(row => {
    const word = row.dataset.word.toLowerCase();
    row.style.display = word.includes(query) ? "" : "none";
  });
});
</script>
</body>
</html>